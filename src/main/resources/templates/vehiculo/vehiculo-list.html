<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veh√≠culos Registrados</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>

<body class="bg-gray-50">

<!-- üî• NAVBAR -->
<nav class="bg-green-700 text-white shadow-lg">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">

        <!-- Logo + nombre -->
        <a th:href="@{/}" class="text-xl font-bold flex items-center">
            <i class="fas fa-car mr-2"></i> GaragePro
        </a>

        <div class="text-sm flex items-center gap-6">

            <a th:href="@{/clientes}" class="hover:text-green-200 flex items-center gap-1">
                <i class="fas fa-users"></i> Clientes
            </a>

            <a th:href="@{/vehiculos}" class="hover:text-green-200 flex items-center gap-1 font-semibold underline">
                <i class="fas fa-car-side"></i> Veh√≠culos
            </a>

            <a th:href="@{/proveedores}" class="hover:text-green-200 flex items-center gap-1">
                <i class="fas fa-truck"></i> Proveedores
            </a>

        </div>
    </div>
</nav>
<!-- / NAVBAR -->

<div class="container mx-auto px-4 py-10">

    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-3xl font-bold text-green-700 flex items-center">
            <i class="fa-solid fa-car-side mr-2"></i> Veh√≠culos Registrados
        </h1>

        <a th:href="@{/vehiculos/nuevo}"
           class="px-5 py-3 bg-green-600 text-white rounded-xl shadow hover:bg-green-700 transition flex items-center gap-2">
            <i class="fa-solid fa-circle-plus"></i> Registrar Nuevo Veh√≠culo
        </a>
    </div>

    <!-- Mensaje -->
    <div th:if="${mensaje}"
         class="p-4 rounded-lg mb-5 border-l-4"
         th:classappend="${tipoMensaje == 'success'} ? 
                         'bg-green-100 border-green-500 text-green-700' :
                         'bg-red-100 border-red-500 text-red-700'">
        <p class="font-medium" th:text="${mensaje}"></p>
    </div>

    <!-- Tabla -->
    <div class="overflow-x-auto shadow-xl bg-white rounded-xl border">
        <table class="w-full border-collapse text-left">

            <thead class="bg-green-600 text-white uppercase text-sm font-semibold">
                <tr>
                    <th class="px-6 py-3">Placa</th>
                    <th class="px-6 py-3">Marca</th>
                    <th class="px-6 py-3">Modelo</th>
                    <th class="px-6 py-3">A√±o</th>
                    <th class="px-6 py-3">Cliente</th>
                    <th class="px-6 py-3">Acciones</th>
                </tr>
            </thead>

            <tbody class="text-gray-700">
                <tr th:each="v : ${vehiculos}"
                    class="border-b hover:bg-gray-100 transition">

                    <td class="px-6 py-3 font-semibold" th:text="${v.placa}"></td>
                    <td class="px-6 py-3" th:text="${v.marca}"></td>
                    <td class="px-6 py-3" th:text="${v.modelo}"></td>
                    <td class="px-6 py-3" th:text="${v.anoFabricacion}"></td>
                    <td class="px-6 py-3" th:text="${v.cliente.nombre + ' ' + v.cliente.apellidos}"></td>

                    <td class="px-6 py-3">
                        <div class="flex gap-3">

                            <a th:href="@{'/vehiculos/editar/' + ${v.idVehiculo}}"
                               class="px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2 text-sm">
                                <i class="fa-solid fa-pen"></i> Editar
                            </a>

                            <form th:action="@{'/vehiculos/eliminar/' + ${v.idVehiculo}}"
                                  method="post"
                                  onsubmit="return confirm('¬øEliminar veh√≠culo?')">

                                <button class="px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-2 text-sm">
                                    <i class="fa-solid fa-trash"></i> Eliminar
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(vehiculos)}">
                    <td colspan="6" class="py-10 text-center text-gray-500">
                        <i class="fa-solid fa-car text-4xl mb-3 text-gray-400"></i>
                        <p class="text-lg">No hay veh√≠culos registrados.</p>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>

</div>

</body>
</html>
